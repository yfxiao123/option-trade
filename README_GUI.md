# 期权交易自动化系统 v2.0 (GUI版本)

## 项目概述

这是一个基于PyQt5的期权交易自动化程序，采用模块化架构设计，提供直观的图形化界面，实现基于价格波动的双向套利交易策略。

## 新版本特性

### 图形化界面
- **实时行情显示**：买卖价、价差、变化率等
- **交易控制面板**：手动交易、参数设置
- **持仓监控**：实时盈亏、持仓信息、交易记录
- **图表展示**：价格走势图、成交量统计
- **策略控制**：参数调整、状态监控
- **系统日志**：分级日志显示、记录导出

### 技术架构
- **模块化设计**：清晰的分层架构，易于维护和扩展
- **多线程处理**：交易与界面分离，保证流畅性
- **信号槽通信**：组件间松耦合通信
- **实时更新**：定时刷新机制保证数据时效性

## 安装依赖

```bash
# 安装所有依赖
pip install -r requirements.txt

# 核心依赖包括：
# PyQt5 - GUI框架
# pyqtgraph - 图表绘制
# pandas - 数据处理
# selenium - Web自动化
# numpy - 数值计算
```

## 快速开始

### 1. 运行GUI版本

```bash
# 启动图形界面
python gui_main.py
```

### 2. 运行命令行版本

```bash
# 运行原始命令行版本
python main.py
```

## 使用指南

### 首次使用

1. **启动程序**
   - 运行 `gui_main.py` 启动GUI程序
   - 系统会显示主界面

2. **配置参数**
   - 点击"工具" → "设置"打开配置对话框
   - 在"基础设置"中填写登录信息
   - 在"交易参数"中调整策略参数
   - 点击"确定"保存设置

3. **连接交易系统**
   - 点击工具栏的"连接"按钮
   - 系统会自动登录并选择合约
   - 连接成功后状态栏显示"已连接"

### 自动交易

1. **启动策略**
   - 在"策略控制"面板中调整参数
   - 点击"启动策略"开始自动交易
   - 系统会实时监控市场并执行交易

2. **监控交易**
   - 在"市场行情"面板查看实时价格
   - 在"持仓监控"面板查看持仓和盈亏
   - 在"价格走势"标签页查看价格图表

3. **停止策略**
   - 点击"停止策略"停止自动交易
   - 或使用"紧急停止"立即停止所有交易

### 手动交易

1. **设置参数**
   - 在"交易控制"面板选择交易方向
   - 设置价格类型（市价/限价）
   - 输入交易数量

2. **执行交易**
   - 点击"执行交易"按钮
   - 系统会弹出确认对话框
   - 确认后执行交易

## 界面说明

### 主要区域

1. **左侧面板**
   - 市场行情：实时显示买卖价格
   - 价格走势：K线图和实时价格曲线
   - 成交量：交易量统计图表

2. **右侧面板**
   - 交易控制：手动交易操作
   - 策略控制：参数调整和策略管理
   - 持仓监控：持仓信息和盈亏统计

3. **底部面板**
   - 系统日志：实时显示运行日志

### 状态栏

- 连接状态：显示与交易系统的连接状态
- 持仓数量：当前持仓合约数量
- 盈亏金额：实时盈亏金额

## 策略参数

### 核心参数

- **价格阈值**：触发交易信号的价格变化阈值（默认0.5%）
- **交易数量**：单次交易的合约数量（默认10张）
- **开仓延迟**：信号触发后等待时间（默认2秒）
- **平仓间隔**：开仓到平仓的时间间隔（默认5秒）

### 高级参数

- **历史长度**：用于判断趋势的价格历史数量（默认3）
- **监控间隔**：价格监控的采样间隔（默认0.5秒）
- **最大持仓**：最大允许持仓数量（默认100张）
- **止损阈值**：止损退出阈值（默认2%）

## 风险提示

1. **交易风险**：期权交易具有高风险，可能导致本金损失
2. **系统依赖**：需要稳定的网络连接和准确的行情数据
3. **建议测试**：建议在模拟环境充分测试后再进行实盘交易
4. **监控重要**：请密切关注系统运行状态，必要时人工介入

## 技术支持

### 常见问题

1. **无法启动**
   - 检查Python版本（需要3.7+）
   - 确认所有依赖已安装
   - 检查ChromeDriver是否匹配Chrome版本

2. **连接失败**
   - 检查网络连接
   - 确认账号密码正确
   - 检查交易网站是否可访问

3. **界面卡顿**
   - 检查系统资源使用情况
   - 尝试重启程序
   - 关闭不必要的标签页

### 开发说明

项目采用模块化架构，各模块职责清晰：

- `gui/`：图形界面模块
- `strategy/`：交易策略模块
- `data/`：数据获取模块
- `execution/`：交易执行模块
- `monitor/`：监控统计模块
- `auth/`：认证登录模块
- `config/`：配置管理模块

### 扩展开发

1. **添加新策略**：在`strategy/`目录创建新策略类
2. **增加数据源**：在`data/`目录扩展数据获取方式
3. **自定义界面**：修改`gui/`目录下的界面组件
4. **集成Web**：各模块提供API，便于Web集成

## 版本历史

- **v2.0**：GUI版本，完整图形界面支持
- **v1.0**：命令行版本，基础功能实现

## 许可证

本项目仅供学习和研究使用，请勿用于商业用途。使用本软件进行实盘交易所产生的一切风险和损失由用户自行承担。